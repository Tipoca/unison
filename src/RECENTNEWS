CHANGES FROM VERSION 2.24.9

* Missed committing some of Karl's patches.

-------------------------------
CHANGES FROM VERSION 2.24.8

* Integrated several patches submitted by Karl M. -- Thanks!!
    - in the GTK2 UI, initialize the "View Details..." button to insensitive 
      (greyed out) and prevent the button from expanding when going to full screen 
    - keep the main window from vanishing when a new window is opened 

* Changed the order of arguments to the default diff command (so that
  the + and - annotations in diff's output are reversed).

* Turned off 'fastcheck' for Excel files on Unix platforms, not just Windows.

* Changed names of temp files created by unison so that they start
  with ".unison." rather than ".#"



-------------------------------
CHANGES FROM VERSION 2.24.7

* Fixed (I hope) the diff functionality on Windows.  (Unfortunately,
  an analogous fix does not immediately work for the merge
  functionality, where we need to be able to grab a process's output
  along two separate channels.)


-------------------------------
CHANGES FROM VERSION 2.24.6

* Compressed the output from the text user interface (particularly
  when run with the -terse flag) to make it easier to interpret the
  results when Unison is run several times in succession from a script.

* Changed the temp file prefix from ".#" to ".unison."

* Fixed an assertion failure when the diff command was used with
  debugging enabled.

-------------------------------
CHANGES FROM VERSION 2.24.5

* More work on the backup module to correct the problem on Windows
  that we uncovered a couple of weeks ago.  All the self tests now run.

-------------------------------
CHANGES FROM VERSION 2.24.4

* More debugging for self-tests on windows

-------------------------------
CHANGES FROM VERSION 2.24.3

* More self tests for WinXP




-------------------------------
CHANGES FROM VERSION 2.24.3

* Yet more debugging output, to help with getting self tests running on WinXP



-------------------------------
CHANGES FROM VERSION 2.24.2

* More debugging output, to help with getting self tests running on WinXP and Linux



-------------------------------
CHANGES FROM VERSION 2.24.2

* More debugging output, to help with getting self tests running on WinXP and Linux

* Replaced symlinks with copies of their targets in the Growl framework in src/uimac.
  This should make the sources easier to check out from the svn repository on WinXP
  systems.


-------------------------------
CHANGES FROM VERSION 2.24.1

* More refinement of the self tests, and some fixes to make them work
  under Windows and Linux (in addition to OSX).



-------------------------------
CHANGES FROM VERSION 2.24.0

* Additional self-tests for the backup module





-------------------------------
CHANGES FROM VERSION 2.24.-1

* Try again

-------------------------------
CHANGES FROM VERSION 2.23.-1

* Bump version number, since I change a preference name on the last commit

-------------------------------
CHANGES FROM VERSION 2.23.7

* Further tidying of code in the Stasher module



-------------------------------
CHANGES FROM VERSION 2.23.6

* Small fix to recent changes (making sure preference files are parsed 
  in the same order as they always have been)



-------------------------------
CHANGES FROM VERSION 2.23.5

* Squashed a longstanding bug that would cause file transfer to fail
  with the message "Failed: Error in readWrite: Is a directory".


-------------------------------
CHANGES FROM VERSION 2.23.4

* Major rewrite of the backup module.  No changes in preferences or
  general behavior, but details of behavior are much simpler, more
  regular, and more correct.  :-)

  The code has been minimally tested, but there are probably still
  some rough edges.  Use with caution.



-------------------------------
CHANGES FROM VERSION 2.23.3

* Add missing file, take 2
-------------------------------
CHANGES FROM VERSION 2.23.2

* Add missing file
-------------------------------
CHANGES FROM VERSION 2.23.1

* If Unison is asked to "follow" a symbolic link but there is nothing
  at the other end of the link, it will now flag this path as an
  error, rather than treating the symlink itself as missing or deleted.  This
  avoids a potentially dangerous situation where a followed symlink
  points to an external filesystem that might be offline with Unison
  is run (whereupon Unison would cheerfully delete the corresponding 
  files in the other replica!). 

* More progress on self-tests (but there's still a long way to go to
  make easy to use infrastructure for this -- it's pretty clunky)

-------------------------------
CHANGES FROM VERSION 2.23.0

* Refined some of the low-level printing and debug-tracing code
  (mainly for the benefit of Harmony, which shares some low-level
  modules with Unison)

* Added a better error message for "ambiguous paths".

* Restored uigtk.mli (which I forgot to restore the other day)

* Added the beginnings of a self-test suite

-------------------------------
CHANGES FROM VERSION 2.22.1

* Restored UISTYLE=gtk build option and uigtk.ml module (which ARE apparently still very much used!)

-------------------------------
CHANGES FROM VERSION 2.22.0

* Removed UISTYLE=gtk option (having received reports that the old gtk 
  interface doesn't compile any more in any case).  UISTYLE=gtk2 should 
  still work.

* Workaround for a bug compiling gtk2 user interface against current versions
  of gtk2+ libraries.  

-------------------------------
CHANGES FROM VERSION 2.22.0

* Removed UISTYLE=gtk option (having received reports that the old gtk 
  interface doesn't compile any more in any case).  UISTYLE=gtk2 should 
  still work.

* Workaround for a bug compiling gtk2 user interface against current versions
  of gtk2+ libraries.  

-------------------------------
CHANGES FROM VERSION 2.22.-1

* Bumped version number.



-------------------------------
CHANGES FROM VERSION 2.21.1

* Fixed some problems in the backup and merging code, for better
  cooperation with external Harmony instances.



-------------------------------
CHANGES FROM VERSION 2.21.0

* Updated copyright information and subversion tags in file headers

-------------------------------
CHANGES FROM VERSION 2.21.-1

* Removed -mergebatch preference.  (I never found it very useful, and
  its semantics were confusing.)

  Bumped minor version number.

* Refined debugging code so that the verbosity of individual modules
  can be controlled separately.  Instead of just putting '-debug
  verbose' on the command line, you can put '-debug update+', which
  causes all the extra messages in the Update module, but not other
  modules, to be printed.  Putting '-debug verbose' causes all modules
  to print with maximum verbosity.

-------------------------------
CHANGES FROM VERSION 2.20.2

* Fixed a bug in merging code where Unison could sometimes deadlock
  with the external merge program, if the latter produced large
  amounts of output.

* Improved the handling of merging in the Mac GUI: merge
  results are now displayed in a separate window (like "diff") instead
  of flashing past in the status line at the top.

-------------------------------
CHANGES FROM VERSION 2.20.1

* Squashed a very insidious bug in the backup mechanism, which turned
  out (after much puzzlement) to occur only when running under the Mac
  GUI.  It seems that the Uimacbridge module includes its own private
  copy of the initialization code from Uicommon (!), and so the
  call to Stasher.initBackups that got added to Uicommon last summer
  was not happening when running with the GUI.  This meant that the
  internal processing of backupprefix and backupsuffix was not
  happening, which meant that multiple backup files were getting
  created with the same names, and this would cause backups to fail
  occasionally (but not always).

  Lesson: Don't duplicate code!!!




-------------------------------
CHANGES FROM VERSION 2.20.0

* Removed misleading documentation for 'repeat' preference.

* The native OSX GUI now adds a scrollbar to the details window at the
  bottom, when necessary to see (e.g.) long failure messages.  (Also
  made it selectable.)  Made the starting window size a little larger.

* When properties have changed, display both old and new ones.                  
  (This behavior can be annoying, so it is controlled by a new flag,            
  '-showprev', which is not visible to the user or mentioned in the             
  documentation.  It's really just for debugging.)                              
                                                                                
* Tidied the output of '-debug all' to make it a little less                    
  overwhelming.                                          
-------------------------------
CHANGES FROM VERSION 2.19.44

Mac GUI: If it's not already installed, and she hasn't disabled this check,
         invite the user to install the command-line tool during startup.

-------------------------------
CHANGES FROM VERSION 2.19.43

Mac GUI: Fix 'Get Info' information
         Fix index declaration in ReconItem.h

-------------------------------
CHANGES FROM VERSION 2.19.42

Enable diff if file contents have changed in one replica, but
only properties in the other (all platforms)

-------------------------------
CHANGES FROM VERSION 2.19.41

Mac GUI: Fix password prompt

-------------------------------
CHANGES FROM VERSION 2.19.40

Mac GUI: Don't open diff window if an external command is used

-------------------------------
CHANGES FROM VERSION 2.19.39

Mac GUI: Preserve row selection when table is resorted

-------------------------------
CHANGES FROM VERSION 2.19.38

Mac GUI: 
* Display error message for failed reconitems
* Auto-hide scroll bars

-------------------------------
CHANGES FROM VERSION 2.19.37

Mac GUI: Fix rescan/selection bug

-------------------------------
CHANGES FROM VERSION 2.19.36

Mac GUI: 
* make sure progress bar always gets to the end
* improve handing of reconitems with errors
* fix window positioning

-------------------------------
CHANGES FROM VERSION 2.19.35

Mac GUI:
* Stop diff from affecting progress bar
* Better validation of diff button
* Fix threadsafety issue with rescan

-------------------------------
CHANGES FROM VERSION 2.19.34

Mac GUI: Small fixes:
* Threadsafe row selection and sorting
* Allow user to resize windows
* Stop column indicator flashing on rescan

-------------------------------
CHANGES FROM VERSION 2.19.33

Mac GUI: Add global progress bar

-------------------------------
CHANGES FROM VERSION 2.19.32

Mac GUI: Fix numerous GUI glitches caused by attempting to update GUI from
         subsidiary threads.

-------------------------------
CHANGES FROM VERSION 2.19.31

Mac GUI:
* Prevent crash when clicking rescan rapidly
* Move code from MyController->awakeFromNib to more appropriate places

-------------------------------
CHANGES FROM VERSION 2.19.30

Mac GUI: Reorganise MyController.*. No code changes

-------------------------------
CHANGES FROM VERSION 2.19.29

Mac GUI: Fix bug where the updates thread would run twice (thanks Alan!)

-------------------------------
CHANGES FROM VERSION 2.19.28

Mac GUI: 
* Get rid of beachball by using a new thread to open new profile
* Rearrange toolbar
* Fix 'make clean'

-------------------------------
CHANGES FROM VERSION 2.19.27

Mac GUI: Add accurate version number to Info.plist, so that
         the cltool/LaunchServices selects the most recent 
         installed version.

-------------------------------
CHANGES FROM VERSION 2.19.26

Mac GUI:
* Add button and menu item to rescan current profile
* Filter out 'There are N reconitems' messages in status text, to make way
  for more informative ones

-------------------------------
CHANGES FROM VERSION 2.19.25

Get rid of harmless build erros

-------------------------------
CHANGES FROM VERSION 2.19.24

Mac GUI: Fix bug spotted by Benjamin where pressing a 'dead' key in tables causes a crash

-------------------------------
CHANGES FROM VERSION 2.19.23

Mac GUI: Add ability to sort the reconitem table by the various columns.
         Clicking on a column header sorts on that column.
         By default, the reconitems are sorted by action in the following 
         order of decreasing urgency:
           Conflict Skip Merge Left-against-recommendation 
           Right-against-recommendation Left-following-recommendation
           Right-following-recommendation (Error)

-------------------------------
CHANGES FROM VERSION 2.19.22

Mac GUI: Remove broken autoscroll code (from 2.19.17)
-------------------------------
CHANGES FROM VERSION 2.19.21

Mac GUI: Strip metadata from toolbar tiff files, dramatically reducing 
file size, apparently without ill effects

-------------------------------
CHANGES FROM VERSION 2.19.20

Mac GUI: Add coloured icons indicating status of reconItems, similar to GTK2 GUI.

-------------------------------
CHANGES FROM VERSION 2.19.19

Mac GUI: More correct handling of tableView initialisation (supercedes 2.19.15)

-------------------------------
CHANGES FROM VERSION 2.19.18

Mac GUI -- improve diff and merge behaviour:

* Disable diff and merge buttons/menuitems when appropriate
* Open the diff window in a useful place the first time it's used

-------------------------------
CHANGES FROM VERSION 2.19.17

Mac GUI -- fix reconitem table:
* Remove keyboard focus when there are no reconitems.
* Disable keypresses when their actions are inappropriate 
  (e.g. after sync)

* Also fix version numbers and formatting in RECENTNEWS
-------------------------------
CHANGES FROM VERSION 2.19.16

Small Mac GUI improvements:
* During sync, scroll updates table to the bottommost item that is being updated
* Fix display of status and diff error messages

-------------------------------
CHANGES FROM VERSION 2.19.15

Mac GUI: Restrict window resizes to prevent user from breaking UI
Add missing type declaration

-------------------------------
CHANGES FROM VERSION 2.19.14

Mac GUI: Fix bug where controls were sometimes disabled when called with 
'unison profilename' because the order in which objects receive awakeFromNib 
is variable.

-------------------------------
CHANGES FROM VERSION 2.19.13

Mac GUI: Add basic diff functionality

-------------------------------
CHANGES FROM VERSION 2.19.12

Jerome's fix for calling diff on the Mac, which would previously fail 
when interrupted.

-------------------------------
CHANGES FROM VERSION 2.19.11

Mac UI: Fix line wrapping in error messages

-------------------------------
CHANGES FROM VERSION 2.19.10

Mac GUI: Fix merge toolbar item

-------------------------------
CHANGES FROM VERSION 2.19.9

Add toolbar-related files missing from previous commit

-------------------------------
CHANGES FROM VERSION 2.19.8

Add Toolbar for common actions to the Mac GUI, similar to the GTK2 one.  
It replaces various buttons.

-------------------------------
CHANGES FROM VERSION 2.19.7

Bug fixed: in text mode, all synchronizations was aborted after the
first failure

-------------------------------
CHANGES FROM VERSION 2.19.6

Several minor fixes for Mac GUI:
* Fix bug where status text wrote on top of old values
* Make reconitem details update after scan
* Make connectingView update faster
* Make connectingView the same size as updatesView 
  to minimise zooming
* Make sure an item is selected in updatesView after scan
* Use fixed-width font for details and enlarge updatesView 
  so it doesn't wrap
* Enlarge preferencesView slightly
* Tidy headers
* Clean up menu item validation code
* Update copyright message to 2006

-------------------------------
CHANGES FROM VERSION 2.19.5

* Converted the assertion failure reported by Eli Barzilay into an exception.

* Fixed bug in stasher.ml that would cause backups to fail on Windows when
  the number of backup versions becomes equal to maxbackups.

-------------------------------
CHANGES FROM VERSION 2.19.2

* Fixed bug that would cause filenames CONTAINING (as opposed to BEGINNING WITH) a 
  string matching "backupprefix" to be ignored.

-------------------------------
CHANGES FROM VERSION 2.19.1

* Fixed a bug where the "directory prefix" part of the backupprefix
  preference was being ignored.  (But, while looking at the code in
  the stasher module and experimenting with its behavior, I'm still
  not very convinced that we're doing backups completely right -- looks
  like too many backup files are getting created.)

-------------------------------
CHANGES FROM VERSION 2.19.0

* Fixed bug resulting in spurious "Aborted" errors during transport (thanks to Jerome for the fix!)


-------------------------------
CHANGES FROM VERSION 2.19.-1

* Bump minor version number

-------------------------------
CHANGES FROM VERSION 2.18.1

* Added some status messages recording when the xferbycopying hint is
  actually used  

* Added version number to log header

* The confirmation of "big deletes" is now controlled by a flag,
  -confirmbigdeletes.  Default is true, which gives the same behavior as
  previously.

-------------------------------
CHANGES FROM VERSION 2.18.0

Increment major version number (forgot to do this when the new
preferences were added recently)

-------------------------------
CHANGES FROM VERSION 2.17.8

Applied Ben Willmore's patches for OS X:

* Recognize more ssh password prompts

* Recognize and prompt for ssh passphrase if asked by ssh

* Fixed bug where GUI would get confused if invoked on the command line with
  a profile.

-------------------------------
CHANGES FROM VERSION 2.17.7

Applied another patch from Alan Schmitt improving the implementation
of forcepatial and preferpartial.

-------------------------------
CHANGES FROM VERSION 2.17.6

Applied patch from Alan Schmitt adding forcepartial and preferpartial
preferences, which behave like 'force' and 'prefer' but can be
specified on a per-path basis (see documentation for details).

Applied fix to IPv6 code from Samuel Thibault

Corrected Props.set as suggested by Dale Worley

Small fix to the text UI from Joseph Dunn.


-------------------------------
CHANGES FROM VERSION 2.17.5

* Incorporated old patch to set read-only file to R/W on OSX before
  attempting to change other attributes, per discussion on
  unison-hackers list.  

-------------------------------
CHANGES FROM VERSION 2.17.4

Mac GUI: enable/disable synchronize and restart buttons
and menu items as appropriate.  Thanks to Ben Willmore.

* Incorporated old patch to set read-only file to R/W on OSX before
  attempting to change other attributes, per discussion on
  unison-hackers list.  

-------------------------------
CHANGES FROM VERSION 2.17.3

A couple of fixes for system-dependent compilation issues.

-------------------------------
CHANGES FROM VERSION 2.17.1

* Tiny fix to export procedure
* Bump version number

-------------------------------
CHANGES FROM VERSION 2.16.5

terminal.ml: more liberal parsing of password prompt
for ssh.

-------------------------------
CHANGES FROM VERSION 2.16.4

* Beginning preparations for a new beta-release

-------------------------------
